---
title: "Spotify Trend for Ed Sheeran, Dua Lipa and Radiohead"
subtitle: "My subtitle if needed"
author: 
  - Xuanle Zhou
  - Dezhen Chen
  - Yongqi Liu
  - Ziyuan Shen
thanks: "Code and data are available at: "
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false
library(usethis)
library(devtools) 
library(tidyverse)
library(spotifyr)
ed_sheeran <- readRDS(here::here("data/01-raw_data/ed_sheeran.rds"))
jj_lin <- readRDS(here::here("data/01-raw_data/jj_lin.rds"))
radiohead <- readRDS(here::here("data/01-raw_data/radiohead.rds"))

#jj_lin <- get_artist_audio_features("JJ Lin")
#radiohead <- get_artist_audio_features("radiohead")
#radiohead <- get_artist_audio_features("radiohead")
```


# Introduction

Overview paragraph

Estimand paragraph

Results paragraph

Why it matters paragraph

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data....



# Data {#sec-data}



```{r}

```




## Overview

We use the statistical programming language R [@citeR].... Our data [@shelter].... Following @tellingstories, we consider...

Overview text

## Outcome variables

Add graphs, tables and text. Use sub-sub-headings for each outcome variable or update the subheading to be singular.



Some of our data is of penguins (@fig-bills), from @palmerpenguins.

```{r}
#| label: fig-dance
#| fig-cap: Danceability of 3 artisits from 2010 to 2024
#| echo: false

# Plotting the data
rbind(ed_sheeran, radiohead, jj_lin) |>
  select(artist_name, album_release_date, danceability) |>
  mutate(album_release_date = ymd(album_release_date)) |>  # Convert album release date to date format
  ggplot(aes(x = album_release_date, y = danceability, color = artist_name)) +
  geom_point(alpha = 0.3) +  # Add points with transparency
  geom_smooth(se = FALSE) +  # Add smooth lines without confidence intervals
  theme_minimal() +  # Use minimal theme
  facet_wrap(facets = vars(artist_name), dir = "v") +  # Facet by artist name, vertical arrangement
  labs(
    x = "Album Release Date",
    y = "Danceability",
    color = "Artist"
  ) +
  scale_color_brewer(palette = "Set1") +  # Use color palette Set1 for artist distinction
  scale_x_date(limits = c(ymd("2010-01-01"), ymd("2024-12-31")),  # Set x-axis limits from 2010 to 2025
               date_breaks = "5 years",  
               date_labels = "%Y") +  
  theme(legend.position = "bottom") 
```

Talk more about it.

And also planes (@fig-planes). (You can change the height and width, but don't worry about doing that until you have finished every other aspect of the paper - Quarto will try to make it look nice and the defaults usually work well once you have enough text.)

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false

analysis_data <- read_csv(here::here("data/02-analysis_data/analysis_data.csv"))

analysis_data |> 
  ggplot(aes(x = width, y = length)) +
  geom_point(alpha = 0.8) +
  theme_minimal() +
  labs(x = "Wing width (mm)",
       y = "Wing length (mm)")
```

Talk way more about it. 

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.








# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results




# Discussion


\appendix

# Appendix {-}
```{r}
#| label: tbl-summary1
#| tbl-cap: Summary Table for Ed Sheeran
#| echo: false
#| warning: false
#| message: false

#top_10_neighborhoods <- read.csv(here::here("data/analysis_data/top_10_neighborhoods.csv"))
#ed_sheeran <- ed_sheeran %>%
 # rename(`Neighborhood ID and Name` = Neighborhood_ID_Name, `Average Rank` = Average_Rank) %>%
 # select(`Neighborhood ID and Name`, `Average Rank`)
#kable(ed_sheeran)
```

```{r}
#| label: tbl-summary2
#| tbl-cap: Summary Table for JJ Lin
#| echo: false
#| warning: false
#| message: false

#top_10_neighborhoods <- read.csv(here::here("data/analysis_data/top_10_neighborhoods.csv"))
#jj_lin <- jj_lin %>%
 # rename(`Neighborhood ID and Name` = Neighborhood_ID_Name, `Average Rank` = Average_Rank) %>%
 # select(`Neighborhood ID and Name`, `Average Rank`)
#kable(ed_sheeran)
```

```{r}
#| label: tbl-summary3
#| tbl-cap: Summary Table for Radiohead
#| echo: false
#| warning: false
#| message: false

#top_10_neighborhoods <- read.csv(here::here("data/analysis_data/top_10_neighborhoods.csv"))
#ed_sheeran <- ed_sheeran %>%
 # rename(`Neighborhood ID and Name` = Neighborhood_ID_Name, `Average Rank` = Average_Rank) %>%
 # select(`Neighborhood ID and Name`, `Average Rank`)
#kable(ed_sheeran)
```






# Additional data details


\newpage


# References


